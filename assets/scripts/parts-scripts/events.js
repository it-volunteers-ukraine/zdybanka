const ajaxUrl=vars.ajaxUrl,sortBtnRef=document.querySelector("#sort-btn"),paginationMoreRef=document.querySelector(".paginate-more"),loadMoreBtnRef=document.querySelector("#load-more"),listElemHtmlRef=document.querySelector("#events-list"),postsPerPage=Number(listElemHtmlRef.getAttribute("posts-per-page")),eventsQueryParams={posts_per_page:postsPerPage,offset:0,action:"events_more",sort:sortBtnRef.getAttribute("data-sort")},controlBtnLoadMore=t=>{t<postsPerPage?paginationMoreRef.classList.add("hidden"):paginationMoreRef.classList.remove("hidden")};async function sendAjax(t,e){let o=new FormData;if(null!=t)for(const[e,r]of Object.entries(t))o.append(e,r);let r={method:"POST",body:o,redirect:"follow"};const s=await fetch(e,r);return(await s).json()}sortBtnRef.addEventListener("click",(()=>{"desc"===sortBtnRef.getAttribute("data-sort")?sortBtnRef.setAttribute("data-sort","asc"):sortBtnRef.setAttribute("data-sort","desc"),eventsQueryParams.offset=0,listElemHtmlRef.setAttribute("page",1);let t=eventsQueryParams;t.sort=sortBtnRef.getAttribute("data-sort"),sendAjax(t,ajaxUrl).then((t=>{console.log(t),listElemHtmlRef.innerHTML=t.html,controlBtnLoadMore(t.posts_count)}))})),loadMoreBtnRef.addEventListener("click",(t=>{let e=eventsQueryParams,o=Number(listElemHtmlRef.getAttribute("page"));e.offset=o*postsPerPage,sendAjax(e,ajaxUrl).then((t=>{console.log(t),controlBtnLoadMore(t.posts_count),o+=1,listElemHtmlRef.insertAdjacentHTML("beforeend",t.html),listElemHtmlRef.setAttribute("page",o)}))}));